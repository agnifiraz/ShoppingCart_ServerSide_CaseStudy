"use strict";(self["webpackChunkcasestudy"]=self["webpackChunkcasestudy"]||[]).push([[7],{5572:(t,e,s)=>{s.d(e,{C:()=>o,_:()=>n});const a="/api/",n=async t=>{let e,s=r();try{let n=await fetch(`${a}${t}`,{method:"GET",headers:s});e=await n.json()}catch(n){console.log(n),e={error:`Error has occured: ${n.message}`}}return e},o=async(t,e)=>{let s,n=r();try{let o=await fetch(`${a}${t}`,{method:"POST",headers:n,body:JSON.stringify(e)});s=await o.json()}catch(o){s=o}return s},r=()=>{const t=new Headers,e=JSON.parse(sessionStorage.getItem("customer"));return e?(t.append("Content-Type","application/json"),t.append("Authorization","Bearer "+e.token)):t.append("Content-Type","application/json"),t}},2007:(t,e,s)=>{s.r(e),s.d(e,{default:()=>k});var a=s(9835),n=s(1957);const o={class:"text-center q-mt-md"},r=["src"],l=(0,a._)("div",{class:"text-h6",style:{color:"blue"}},"Find 3 Closest Branches to",-1),c=(0,a._)("br",null,null,-1),d={style:{height:"50vh",width:"90vw","margin-left":"5vw",border:"solid"},ref:"mapRef"};function i(t,e,s,i,u,p){const m=(0,a.up)("q-avatar"),h=(0,a.up)("q-input"),w=(0,a.up)("q-btn");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a.Wm)(m,{class:"q-mb-md",size:"xl",square:""},{default:(0,a.w5)((()=>[(0,a._)("img",{src:"/img/logo.png"},null,8,r)])),_:1}),l,(0,a._)("div",null,[(0,a.Wm)(h,{class:"q-ma-lg text-h5",placeholder:"enter current address",id:"address",modelValue:i.state.address,"onUpdate:modelValue":e[0]||(e[0]=t=>i.state.address=t)},null,8,["modelValue"]),c]),(0,a.Wm)(w,{label:"Find 3",onClick:i.genMap,class:"q-mb-md",style:{width:"30vw"}},null,8,["onClick"]),(0,a.wy)((0,a._)("div",d,null,512),[[n.F8,!0===i.state.showmap]])])}var u=s(499),p=s(5572);const m={name:"BranchLocator",setup(){const t=(0,u.iH)(null);let e=(0,u.qj)({status:"",address:"",showmap:!1});const s=async()=>{try{e.showmap=!0;const s=window.tt;let a=`https://api.tomtom.com/search/2/geocode/${e.address}.json?key=skwtG7Ku9T8DNpUNoPElNtT8UnJr9HCi`,n=await fetch(a),o=await n.json(),r=o.results[0].position.lat,l=o.results[0].position.lon,c=s.map({key:"skwtG7Ku9T8DNpUNoPElNtT8UnJr9HCi",container:t.value,source:"vector/1/basic-main",center:[l,r],zoom:10});o=await(0,p._)(`branch/${r}/${l}`);const d=o;d.forEach((t=>{let e=(new s.Marker).setLngLat([t.longitude,t.latitude]).addTo(c),a=25,n=new s.Popup({offset:a});n.setHTML(`<div id="popup">Branch#: ${t.id}</div><div>${t.street}, ${t.city}\n            <br/>${t.distance.toFixed(2)} km</div>`),e.setPopup(n)}))}catch(s){e.status=s.message}};return{mapRef:t,state:e,genMap:s}}};var h=s(1639),w=s(1357),g=s(6611),v=s(4455),y=s(9984),f=s.n(y);const b=(0,h.Z)(m,[["render",i]]),k=b;f()(m,"components",{QAvatar:w.Z,QInput:g.Z,QBtn:v.Z})}}]);